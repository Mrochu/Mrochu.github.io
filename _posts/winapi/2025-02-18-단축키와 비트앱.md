---
layout: post
title:  "단축키와 비트앱"
date:   2025-02-18 17:38:10 +0900
category: winapi
---
1.단축키

윈도우에서의 단축키는 ctrl+c와 같은 형태의 약속과 같은 것이다.
윈도우 api 프로그램에서 단축키는 메뉴속성창 에서 리소스 추가 accelerator을 새로만들어준다.
그리고 단축키를 매핑 해준다. 
``` c++
//여러가지 헤더파일
#include "resource.h"
//생략
//단축키는 메시지를 WndProc로 본기전 WinMain에서 한번 처리를 해줘야 하기때문에 
// WinMain에서 한번 translation 해줘야 한다.
int WINAPI WinMain( ){
//생략
HACCEL hAcc; // 리소스를 사용하기 위해서 리소스 ID를 저장하기 위한 핸들변수
//LoadAccelerators를 이용하여 엑셀레이터를 로드한다. 참고로 IDR_ACCELERATOR1 은 엑셀레이터 ID이다.
hAcc = LoadAccelerators(hInstance,MAKEINTRESOURCE(IDR_ACCELERATOR1))
//생략

//GetMessage함수를 이용하여 메시지 큐의 멧지를 얻어온 다음 
//TranslateAccelerator응 이용해 엑셀러이터에 등록된 단축키인지 판별한다.
//즉 받아온 메시지와 엑셀레이터를 로드한 hAcc로 메시지가 단축키에 해당하는지 검사한다.
while(GetMessage(&msg,NULL,0,0)){
    if(!TranslateAccelerator(hwnd,hAcc,&msg)){
        TranslateMessate(&msg);
        DispatchMessage(&msg);
    }
}

}
```

---

2.비트맵
비트맵도 앞에나온 메뉴 또는 단축키와 같은 리소스이다, 
따라서 생성하고 사용하는 방법이 일반 리소스와 매우 유사하다,
먼저 새로운 비트앱 이미지를 만드는데 직접만들거나 얻어온후 비트뱀 형식으로 저장해 사용한다.
그리고 이 비트맵을 이용해 화면에 출력하는 방식을 취한다.
비트맵 이미지 출력력과정은 다음과 같다.

(1)비트맵 가져오기
(2)비트맵 로드하기
(3)화면얻기
(4)메모리 디바이스 컨텍스트 만들기
(5)비트맵 사용 선언하기
(6)비트맵을 화면에 출력하기

[msdn](https://learn.microsoft.com/ko-kr/windows/win32/api/wingdi/nf-wingdi-stretchblt)
```c++
//BitBlt()
BOOL BitBlt(
  HDC   hdc,        //화면을 가진 컨텍스트
  int   x,          //hdc 에 그리고자 하는 영역역
  int   y,
  int   cx,
  int   cy,
  HDC   hdcSrc,     //원하는 비트맵 이미지 성정
  int   x1,
  int   y1,
  DWORD rop
);

//StretBlt() //화면을 축소하거나 확대해 보여줄수있는 함수수
BOOL StretchBlt(
    HDC   hdcDest,  //화면을 가진 컨텍스트
    int   xDest,
    int   yDest,
    int   wDest,
    int   hDest,
    HDC   hdcSrc,
    int   xSrc,
    int   ySrc,
    int   wSrc,
    int   hSrc,
    DWORD rop
);

//비트맵 이미지 출력
WndProc(){
        static HBITMAP hBitmap;
}
```

3.더블버퍼링